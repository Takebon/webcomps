class t extends HTMLElement{constructor(){super(),this.state={}}isCustomElement(t){return"CustomElement"===Object.getPrototypeOf(customElements.get(t.tagName.toLowerCase())).name}updateBindings(t,e=""){[...this.selectAll(`[data-bind$="${t}"]`)].forEach(t=>{const s=t.dataset.bind,i=s.includes(":")?s.split(":").shift():s,r=s.includes(".")?s.split(".").slice(1).reduce((t,e)=>t[e],e):e,o=[...this.selectAll(t.tagName)].find(e=>e===t);s.includes(":")&&this.isCustomElement(o)?o.setState({[""+i]:r}):this.isArray(r)?o[i]=r:t.textContent=r.toString()})}setState(t){Object.entries(t).forEach(([t,e])=>{this.state[t]=this.isObject(this.state[t])&&this.isObject(e)?{...this.state[t],...e}:e;const s=this.isObject(e)?this.getBindKey(t,e):t;(this.isArray(s)?s:[s]).forEach(t=>this.updateBindings(t,e))})}getBindKey(t,e){return Object.keys(e).map(s=>this.isObject(e[s])?`${t}.${this.getBindKey(s,e[s])}`:`${t}.${s}`)}isArray(t){return Array.isArray(t)}isObject(t){return"[object Object]"===Object.prototype.toString.call(t)}select(t){return this.shadowRoot?this.shadowRoot.querySelector(t):this.querySelector(t)}selectAll(t){return this.shadowRoot?this.shadowRoot.querySelectorAll(t):this.querySelectorAll(t)}multiSelect(t){Object.entries(t).forEach(([t,e])=>{this[t]=this.select(e)})}show(t=null){const e=t||this;(Array.isArray(e)||NodeList.prototype.isPrototypeOf(e)?e:[e]).forEach(t=>{t.style.display="",t.removeAttribute("hidden")})}hide(t=null){const e=t||this;(Array.isArray(e)||NodeList.prototype.isPrototypeOf(e)?e:[e]).forEach(t=>{t.style.display="none",t.setAttribute("hidden","")})}css(t,e){(Array.isArray(t)?t:[t]).forEach(t=>Object.assign(t.style,e))}addTemplate(t,e,s=!1){const i=this.select(e).content.cloneNode(!0);s&&(t.innerHTML=""),t.appendChild(i)}}export{t as CustomElement};
